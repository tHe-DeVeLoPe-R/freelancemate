<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Freelancer Client Manager</title>
  <link rel="stylesheet" href="styles.css">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
</head>

<body>
  <div class="container">
    <!-- Header -->
    <header class="header">
      <div class="header-content">
        <div class="logo">
          <div class="logo-icon">ğŸ’¼</div>
          <h1>Freelancer Manager</h1>
        </div>
        <div class="flex gap-1 items-center">
          <div id="api-status" class="badge badge-pending">ğŸ“¡ Connecting...</div>
          <button class="btn btn-secondary btn-sm" onclick="app.render()">
            ğŸ”„ Refresh
          </button>
          <button class="btn btn-danger btn-sm" onclick="app.resetDatabase()">
            âš ï¸ Reset
          </button>
        </div>
      </div>
    </header>

    <!-- Dashboard Stats -->
    <div class="dashboard-stats">
      <div class="stat-card warning" onclick="app.switchTab('projects')">
        <div class="stat-header">
          <div class="stat-icon">â³</div>
        </div>
        <div class="stat-value" id="stat-pending-work">0</div>
        <div class="stat-label">Pending Work</div>
      </div>

      <div class="stat-card warning" onclick="app.switchTab('payments')">
        <div class="stat-header">
          <div class="stat-icon">ğŸ•’</div>
        </div>
        <div class="stat-value" id="stat-pending-7days">Rs. 0</div>
        <div class="stat-label">Due in 7 Days</div>
      </div>

      <div class="stat-card danger" onclick="app.switchTab('payments')">
        <div class="stat-header">
          <div class="stat-icon">ğŸ’°</div>
        </div>
        <div class="stat-value" id="stat-total-pending">Rs. 0</div>
        <div class="stat-label">Total Pending</div>
      </div>

      <div class="stat-card success">
        <div class="stat-header">
          <div class="stat-icon">ğŸ“Š</div>
        </div>
        <div class="stat-value" id="stat-monthly-total">Rs. 0</div>
        <div class="stat-label">Received This Month</div>
      </div>
    </div>

    <!-- Revenue Trend Chart -->
    <div class="chart-container">
      <div class="chart-header">Revenue Trend (Last 3 Months)</div>
      <div id="revenue-chart" class="chart-area">
        <!-- Rendered by JS -->
      </div>
    </div>

    <!-- Navigation Tabs -->
    <div class="nav-tabs">
      <button class="tab-btn active" data-tab="clients" onclick="window.app.switchTab('clients')">
        ğŸ‘¥ Clients
      </button>
      <button class="tab-btn" data-tab="projects" onclick="window.app.switchTab('projects')">
        ğŸ“‹ Projects
      </button>
      <button class="tab-btn" data-tab="payments" onclick="window.app.switchTab('payments')">
        ğŸ’³ Payments
      </button>
      <button class="tab-btn" data-tab="reminders" onclick="window.app.switchTab('reminders')">
        ğŸ”” Reminders
      </button>
    </div>

    <!-- Clients Section -->
    <div id="clients-section" class="content-section active">
      <div class="card">
        <div class="card-header">
          <h2 class="card-title">Clients</h2>
          <button class="btn btn-primary" onclick="app.showAddClientModal()">
            â• Add Client
          </button>
        </div>
        <div class="table-container">
          <table>
            <thead>
              <tr>
                <th>Name</th>
                <th>Company</th>
                <th>Email</th>
                <th>Phone</th>
                <th>Projects</th>
                <th>Actions</th>
              </tr>
            </thead>
            <tbody id="clients-table-body">
              <!-- Populated by JavaScript -->
            </tbody>
          </table>
        </div>
        <div id="clients-empty" class="empty-state hidden">
          <div class="empty-state-icon">ğŸ‘¥</div>
          <div class="empty-state-text">No clients yet</div>
          <button class="btn btn-primary" onclick="app.showAddClientModal()">
            Add Your First Client
          </button>
        </div>
      </div>
    </div>

    <!-- Projects Section -->
    <div id="projects-section" class="content-section">
      <div class="card">
        <div class="card-header">
          <h2 class="card-title">Projects</h2>
          <button class="btn btn-primary" onclick="app.showAddProjectModal()">
            â• Add Project
          </button>
        </div>
        <div class="table-container">
          <table>
            <thead>
              <tr>
                <th>Project</th>
                <th>Client</th>
                <th>Deadline</th>
                <th>Amount</th>
                <th>Status</th>
                <th>Actions</th>
              </tr>
            </thead>
            <tbody id="projects-table-body">
              <!-- Populated by JavaScript -->
            </tbody>
          </table>
        </div>
        <div id="projects-empty" class="empty-state hidden">
          <div class="empty-state-icon">ğŸ“‹</div>
          <div class="empty-state-text">No projects yet</div>
          <button class="btn btn-primary" onclick="app.showAddProjectModal()">
            Add Your First Project
          </button>
        </div>
      </div>
    </div>

    <!-- Payments Section -->
    <div id="payments-section" class="content-section">
      <div class="card">
        <div class="card-header">
          <h2 class="card-title">Payments</h2>
        </div>
        <div class="table-container">
          <table>
            <thead>
              <tr>
                <th>Project</th>
                <th>Client</th>
                <th>Amount</th>
                <th>Due Date</th>
                <th>Status</th>
                <th>Actions</th>
              </tr>
            </thead>
            <tbody id="payments-table-body">
              <!-- Populated by JavaScript -->
            </tbody>
          </table>
        </div>
        <div id="payments-empty" class="empty-state hidden">
          <div class="empty-state-icon">ğŸ’³</div>
          <div class="empty-state-text">No payments yet</div>
        </div>
      </div>
    </div>

    <!-- Reminders Section -->
    <div id="reminders-section" class="content-section">
      <div class="card">
        <div class="card-header">
          <h2 class="card-title">Payment Reminders</h2>
          <span class="badge badge-overdue" id="reminders-count">0 reminders</span>
        </div>
        <div class="table-container">
          <table>
            <thead>
              <tr>
                <th>Client</th>
                <th>Project</th>
                <th>Amount</th>
                <th>Days Pending</th>
                <th>Days Overdue</th>
                <th>Actions</th>
              </tr>
            </thead>
            <tbody id="reminders-table-body">
              <!-- Populated by JavaScript -->
            </tbody>
          </table>
        </div>
        <div id="reminders-empty" class="empty-state hidden">
          <div class="empty-state-icon">âœ…</div>
          <div class="empty-state-text">No reminders needed!</div>
          <p style="color: var(--text-secondary);">All payments are on track</p>
        </div>
      </div>
    </div>
  </div>

  <!-- Add/Edit Client Modal -->
  <div id="client-modal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <h3 class="modal-title" id="client-modal-title">Add Client</h3>
        <button class="close-btn" onclick="app.closeModal('client-modal')">&times;</button>
      </div>
      <form id="client-form" onsubmit="app.saveClient(event)">
        <input type="hidden" id="client-id">
        <div class="form-group">
          <label class="form-label">Name *</label>
          <input type="text" class="form-input" id="client-name" required>
        </div>
        <div class="form-group">
          <label class="form-label">Email</label>
          <input type="email" class="form-input" id="client-email">
        </div>
        <div class="form-group">
          <label class="form-label">Phone</label>
          <input type="tel" class="form-input" id="client-phone">
        </div>
        <div class="form-group">
          <label class="form-label">Company</label>
          <input type="text" class="form-input" id="client-company">
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" onclick="app.closeModal('client-modal')">
            Cancel
          </button>
          <button type="submit" class="btn btn-primary">
            Save Client
          </button>
        </div>
      </form>
    </div>
  </div>

  <!-- Add/Edit Project Modal -->
  <div id="project-modal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <h3 class="modal-title" id="project-modal-title">Add Project</h3>
        <button class="close-btn" onclick="app.closeModal('project-modal')">&times;</button>
      </div>
      <form id="project-form" onsubmit="app.saveProject(event)">
        <input type="hidden" id="project-id">
        <div class="form-group">
          <label class="form-label">Client *</label>
          <select class="form-select" id="project-client" required>
            <option value="">Select a client</option>
          </select>
        </div>
        <div class="form-group">
          <label class="form-label">Project Title *</label>
          <input type="text" class="form-input" id="project-title" required>
        </div>
        <div class="form-group">
          <label class="form-label">Description</label>
          <textarea class="form-textarea" id="project-description"></textarea>
        </div>
        <div class="form-group">
          <label class="form-label">Deadline *</label>
          <input type="date" class="form-input" id="project-deadline" required>
        </div>
        <div class="form-group">
          <label class="form-label">Amount (PKR) *</label>
          <input type="number" class="form-input" id="project-amount" step="0.01" required>
        </div>
        <div class="form-group">
          <label class="form-label">Status *</label>
          <select class="form-select" id="project-status" required>
            <option value="pending">Pending</option>
            <option value="in-progress">In Progress</option>
            <option value="delivered">Delivered</option>
          </select>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" onclick="app.closeModal('project-modal')">
            Cancel
          </button>
          <button type="submit" class="btn btn-primary">
            Save Project
          </button>
        </div>
      </form>
    </div>
  </div>

  <!-- Scripts -->
  <script src="utils.js"></script>
  <script src="data-manager.js"></script>
  <script src="analytics.js"></script>
  <script src="app.js"></script>
</body>

</html>